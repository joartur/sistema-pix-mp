<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagamento PIX ‚Ä¢ Sistema Oficial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --success: #059669;
            --danger: #dc2626;
        }
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }
        
        .card-shadow {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
        }
        
        .gradient-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        }
        
        .gradient-success {
            background: linear-gradient(135deg, var(--success) 0%, #047857 100%);
        }
        
        .countdown-alert {
            animation: countdownAlert 1s infinite alternate;
        }
        
        @keyframes countdownAlert {
            from { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4);
            }
            to { 
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(220, 38, 38, 0);
            }
        }
        
        .progress-timer {
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--success), var(--primary), var(--danger));
            background-size: 300% 100%;
            animation: timerAnimation 30s linear forwards;
        }
        
        @keyframes timerAnimation {
            0% { 
                background-position: 100% 0;
                width: 100%;
            }
            70% { 
                background-position: 0 0;
                width: 30%;
            }
            100% { 
                background-position: 0 0;
                width: 0%;
            }
        }
        
        .fade-up {
            animation: fadeUp 0.6s ease-out;
        }
        
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .btn-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px -8px rgba(0, 0, 0, 0.15);
        }
        
        .qr-code-hover {
            transition: transform 0.5s ease;
        }
        
        .qr-code-hover:hover {
            transform: scale(1.03);
        }
        
        .copy-flash {
            animation: copyFlash 0.8s ease;
        }
        
        @keyframes copyFlash {
            0% { background-color: transparent; }
            30% { background-color: rgba(37, 99, 235, 0.15); }
            100% { background-color: transparent; }
        }
        
        .status-dot {
            animation: statusPulse 2s infinite;
        }
        
        @keyframes statusPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .input-focus:focus {
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
            border-color: var(--primary);
        }
    </style>
</head>
<body class="p-4 md:p-6">
    <div class="max-w-6xl mx-auto">
        <!-- Header Oficial -->
        <header class="mb-8 fade-up">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                <div class="flex items-center">
                    <a href="/public/index.html" class="flex items-center text-gray-700 hover:text-primary transition-colors font-medium">
                        <i class="fas fa-arrow-left mr-3 text-lg"></i>
                        <span>Voltar para Gerar Nova Cobran√ßa</span>
                    </a>
                </div>
                
                <div class="flex items-center">
                    <div class="w-12 h-12 gradient-primary rounded-xl flex items-center justify-center mr-4 shadow-lg">
                        <i class="fas fa-brazilian-real-sign text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Pagamento PIX</h1>
                        <div class="flex items-center">
                            <div class="w-2 h-2 bg-success rounded-full mr-2"></div>
                            <span class="text-success font-medium">Sistema em Produ√ß√£o</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-3">
                    <div class="hidden md:block bg-primary/10 text-primary px-4 py-2 rounded-lg font-medium">
                        <i class="fas fa-lock mr-2"></i>
                        Ambiente Seguro
                    </div>
                    <div class="bg-white border border-gray-300 px-4 py-2 rounded-lg">
                        <div class="text-sm text-gray-500">Transa√ß√£o</div>
                        <div class="font-mono font-bold">#139558626783</div>
                    </div>
                </div>
            </div>
        </header>

        <div class="grid lg:grid-cols-2 gap-8 mb-8">
            <!-- Coluna Esquerda - Informa√ß√µes -->
            <div class="fade-up" style="animation-delay: 0.1s">
                <div class="bg-white rounded-3xl card-shadow overflow-hidden h-full">
                    <!-- Header do Card -->
                    <div class="gradient-primary px-8 py-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-2xl font-bold text-white">Instru√ß√µes de Pagamento</h2>
                                <p class="text-blue-100 opacity-90 mt-1">Siga os passos para concluir sua transa√ß√£o</p>
                            </div>
                            <div class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full">
                                <span class="text-white font-medium">Pagamento Instant√¢neo</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conte√∫do do Card -->
                    <div class="p-8">
                        <!-- Valor a Pagar -->
                        <div class="text-center mb-10">
                            <div class="inline-block mb-6">
                                <div class="text-gray-600 mb-2 font-medium">VALOR A PAGAR</div>
                                <div class="text-6xl font-bold text-success mb-4">R$ 0,01</div>
                                <div class="inline-flex items-center px-6 py-3 bg-success/10 text-success rounded-full font-semibold">
                                    <i class="fas fa-check-circle mr-3"></i>
                                    Valor m√≠nimo dispon√≠vel
                                </div>
                            </div>
                        </div>
                        
                        <!-- Passo a Passo -->
                        <div class="mb-10">
                            <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                                <i class="fas fa-list-ol text-primary mr-3"></i>
                                Como realizar o pagamento:
                            </h3>
                            
                            <div class="space-y-6">
                                <div class="flex items-start p-4 bg-blue-50 rounded-2xl">
                                    <div class="flex-shrink-0 w-10 h-10 bg-white rounded-xl flex items-center justify-center mr-4 border-2 border-primary shadow">
                                        <span class="text-primary font-bold text-lg">1</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-900 mb-1">Acesse seu aplicativo banc√°rio</h4>
                                        <p class="text-gray-600">Abra o app do seu banco ou institui√ß√£o financeira</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start p-4 bg-blue-50 rounded-2xl">
                                    <div class="flex-shrink-0 w-10 h-10 bg-white rounded-xl flex items-center justify-center mr-4 border-2 border-primary shadow">
                                        <span class="text-primary font-bold text-lg">2</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-900 mb-1">Selecione "Pagar com PIX"</h4>
                                        <p class="text-gray-600">Acesse a se√ß√£o de pagamentos e escolha a op√ß√£o PIX</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start p-4 bg-blue-50 rounded-2xl">
                                    <div class="flex-shrink-0 w-10 h-10 bg-white rounded-xl flex items-center justify-center mr-4 border-2 border-primary shadow">
                                        <span class="text-primary font-bold text-lg">3</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-900 mb-1">Escaneie o QR Code</h4>
                                        <p class="text-gray-600">Aponte a c√¢mera do celular para o c√≥digo ao lado</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start p-4 bg-blue-50 rounded-2xl">
                                    <div class="flex-shrink-0 w-10 h-10 bg-white rounded-xl flex items-center justify-center mr-4 border-2 border-primary shadow">
                                        <span class="text-primary font-bold text-lg">4</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-900 mb-1">Confirme o pagamento</h4>
                                        <p class="text-gray-600">Revise os dados e confirme a transa√ß√£o</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Timer -->
                        <div class="mb-10">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center">
                                    <i class="fas fa-clock text-primary text-xl mr-3"></i>
                                    <div>
                                        <div class="font-semibold text-gray-900">Tempo Restante</div>
                                        <div class="text-sm text-gray-600">Esta cobran√ßa expira em:</div>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <div id="countdown" class="text-3xl font-bold text-gray-900 mr-4">30:00</div>
                                    <div class="w-4 h-4 bg-success rounded-full status-dot"></div>
                                </div>
                            </div>
                            
                            <div class="progress-timer mb-3"></div>
                            
                            <div class="flex justify-between text-sm text-gray-600">
                                <span><i class="fas fa-play-circle mr-1"></i> Iniciado</span>
                                <span><i class="fas fa-stop-circle mr-1"></i> Expira: <span id="expiryTime">15:30</span></span>
                            </div>
                        </div>
                        
                        <!-- Status do Pagamento -->
                        <div class="bg-gray-50 rounded-2xl p-6 mb-8 border border-gray-200">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <div class="text-gray-600 font-medium mb-2">Status da Transa√ß√£o</div>
                                    <div class="flex items-center">
                                        <span id="statusText" class="text-xl font-bold text-primary mr-3">Aguardando Pagamento</span>
                                        <div class="w-3 h-3 bg-primary rounded-full status-dot"></div>
                                    </div>
                                </div>
                                <button onclick="checkPaymentStatus()" 
                                        class="px-5 py-3 bg-white border-2 border-primary text-primary font-semibold rounded-xl hover:bg-primary hover:text-white transition-all duration-300 btn-hover">
                                    <i class="fas fa-sync-alt mr-2"></i>
                                    Atualizar Status
                                </button>
                            </div>
                            <div class="text-sm text-gray-600">
                                <i class="fas fa-info-circle mr-2"></i>
                                O status ser√° atualizado automaticamente ap√≥s o pagamento
                            </div>
                        </div>
                        
                        <!-- Bot√£o de Tentar Novamente -->
                        <button onclick="tryAgain()" 
                                class="w-full py-4 bg-gray-900 hover:bg-black text-white font-bold rounded-xl transition-all duration-300 btn-hover flex items-center justify-center text-lg">
                            <i class="fas fa-redo mr-3"></i>
                            üîÑ Gerar Nova Cobran√ßa
                        </button>
                    </div>
                </div>
            </div>

            <!-- Coluna Direita - QR Code & A√ß√µes -->
            <div class="fade-up" style="animation-delay: 0.2s">
                <div class="bg-white rounded-3xl card-shadow overflow-hidden h-full">
                    <!-- Header do Card -->
                    <div class="gradient-success px-8 py-6">
                        <h2 class="text-2xl font-bold text-white">QR Code para Pagamento</h2>
                        <p class="text-green-100 opacity-90 mt-1">Escaneie com seu aplicativo banc√°rio</p>
                    </div>
                    
                    <!-- Conte√∫do do Card -->
                    <div class="p-8">
                        <!-- QR Code Container -->
                        <div class="text-center mb-10">
                            <div class="inline-block relative mb-6">
                                <div class="qr-code-hover">
                                    <div class="w-80 h-80 bg-gradient-to-br from-gray-50 to-white rounded-2xl flex items-center justify-center mx-auto border-8 border-white shadow-2xl">
                                        <!-- QR Code ser√° inserido aqui -->
                                        <div class="text-center p-8">
                                            <div class="w-60 h-60 bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl flex items-center justify-center mx-auto mb-6">
                                                <div class="text-center">
                                                    <i class="fas fa-qrcode text-white text-8xl mb-4"></i>
                                                    <div class="text-white font-bold text-lg">C√ìDIGO PIX</div>
                                                </div>
                                            </div>
                                            <div class="text-gray-700 font-semibold">Pronto para escaneamento</div>
                                            <div class="text-gray-500 text-sm mt-2">Sistema Oficial de Pagamentos</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="absolute -top-4 -right-4">
                                    <div class="bg-white rounded-full p-4 shadow-xl">
                                        <div class="w-14 h-14 bg-success rounded-full flex items-center justify-center">
                                            <i class="fas fa-camera text-white text-2xl"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-center text-gray-600 mb-2">
                                <i class="fas fa-mobile-alt mr-2"></i>
                                <span>Abra a c√¢mera do seu app banc√°rio</span>
                            </div>
                            <div class="text-gray-500 text-sm">
                                Compat√≠vel com todos os bancos brasileiros
                            </div>
                        </div>
                        
                        <!-- C√≥digo PIX Copia e Cola -->
                        <div class="mb-10">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold text-gray-900 flex items-center">
                                    <i class="fas fa-key text-primary mr-3"></i>
                                    C√≥digo PIX
                                </h3>
                                <button onclick="copyPixCode()" 
                                        id="copyBtn"
                                        class="px-5 py-3 gradient-primary hover:opacity-90 text-white font-semibold rounded-xl transition-all duration-300 btn-hover flex items-center">
                                    <i class="far fa-copy mr-2"></i>
                                    Copiar C√≥digo
                                </button>
                            </div>
                            
                            <div class="relative group">
                                <div id="pixCode" 
                                     class="bg-gray-50 p-6 rounded-2xl font-mono text-gray-900 overflow-x-auto whitespace-nowrap text-lg border-2 border-transparent group-hover:border-primary transition-all duration-300">
                                    00020126580014br.gov.bcb.pix0136655d491f-81a7-48d2‚Ä¶009Sao Paulo62250521mpqrinter139558626783630470DA
                                </div>
                                <div id="copySuccess" class="hidden absolute right-6 top-1/2 transform -translate-y-1/2">
                                    <div class="bg-success text-white p-3 rounded-lg shadow-lg">
                                        <i class="fas fa-check-circle text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-center mt-4 text-gray-600">
                                <i class="fas fa-info-circle mr-2 text-primary"></i>
                                <span class="text-sm">Copie e cole no campo PIX do seu banco</span>
                            </div>
                        </div>
                        
                        <!-- A√ß√µes Principais -->
                        <div class="space-y-6">
                            <button onclick="markAsPaid()" 
                                    class="w-full py-5 gradient-success hover:opacity-95 text-white font-bold rounded-xl transition-all duration-300 btn-hover flex items-center justify-center text-lg">
                                <i class="fas fa-check-circle mr-3 text-xl"></i>
                                ‚úÖ Confirmar Pagamento Realizado
                            </button>
                            
                            <button onclick="newPayment()" 
                                    class="w-full py-5 bg-primary hover:bg-primary-dark text-white font-bold rounded-xl transition-all duration-300 btn-hover flex items-center justify-center text-lg">
                                <i class="fas fa-plus-circle mr-3 text-xl"></i>
                                üÜï Criar Nova Cobran√ßa
                            </button>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <button onclick="sharePayment()" 
                                        class="py-4 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold rounded-xl transition-all duration-300 btn-hover flex items-center justify-center">
                                    <i class="fas fa-share-alt mr-2"></i>
                                    Compartilhar
                                </button>
                                <button onclick="downloadQRCode()" 
                                        class="py-4 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold rounded-xl transition-all duration-300 btn-hover flex items-center justify-center">
                                    <i class="fas fa-download mr-2"></i>
                                    Baixar QR Code
                                </button>
                            </div>
                        </div>
                        
                        <!-- Ajuda R√°pida -->
                        <div class="mt-10 pt-8 border-t border-gray-200">
                            <div class="flex items-start p-5 bg-blue-50 rounded-2xl">
                                <div class="flex-shrink-0 w-12 h-12 bg-primary rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas fa-headset text-white text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-900 mb-2">Precisa de ajuda?</h4>
                                    <p class="text-gray-700 mb-3">Nossa equipe de suporte est√° dispon√≠vel para ajud√°-lo</p>
                                    <button onclick="contactSupport()" 
                                            class="text-primary font-semibold hover:text-primary-dark transition-colors">
                                        <i class="fas fa-phone-alt mr-2"></i>
                                        Falar com Suporte
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Oficial -->
        <footer class="text-center fade-up" style="animation-delay: 0.3s">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="flex flex-col items-center p-6 bg-white rounded-2xl card-shadow">
                    <div class="w-16 h-16 bg-primary/10 rounded-xl flex items-center justify-center mb-4">
                        <i class="fas fa-shield-check text-primary text-2xl"></i>
                    </div>
                    <h4 class="font-bold text-gray-900 mb-2">Pagamento Seguro</h4>
                    <p class="text-gray-600">Criptografia de ponta a ponta</p>
                </div>
                
                <div class="flex flex-col items-center p-6 bg-white rounded-2xl card-shadow">
                    <div class="w-16 h-16 bg-success/10 rounded-xl flex items-center justify-center mb-4">
                        <i class="fas fa-bolt text-success text-2xl"></i>
                    </div>
                    <h4 class="font-bold text-gray-900 mb-2">Confirma√ß√£o Imediata</h4>
                    <p class="text-gray-600">Resultado em tempo real</p>
                </div>
                
                <div class="flex flex-col items-center p-6 bg-white rounded-2xl card-shadow">
                    <div class="w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                        <i class="fas fa-check-double text-purple-600 text-2xl"></i>
                    </div>
                    <h4 class="font-bold text-gray-900 mb-2">Sistema Homologado</h4>
                    <p class="text-gray-600">Conformidade com o Banco Central</p>
                </div>
            </div>
            
            <div class="text-gray-600">
                <p class="mb-2 font-medium">Sistema PIX Oficial ‚Ä¢ Ambiente de Produ√ß√£o ‚Ä¢ v2.1.4</p>
                <p class="text-sm">¬© 2024 Sistema de Pagamentos Instant√¢neos. Transa√ß√£o #139558626783</p>
            </div>
        </footer>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-8 right-8 bg-gray-900 text-white px-6 py-4 rounded-2xl shadow-2xl z-50 max-w-sm transform translate-y-10 opacity-0 transition-all duration-300"></div>

    <script>
        // Sistema em produ√ß√£o - funcionalidades reais
        let countdownInterval;
        let timeRemaining = 30 * 60; // 30 minutos
        const transactionId = '139558626783';
        
        function startCountdown() {
            const countdownElement = document.getElementById('countdown');
            const expiryTimeElement = document.getElementById('expiryTime');
            
            // Calcular hor√°rio de expira√ß√£o
            const expiry = new Date();
            expiry.setMinutes(expiry.getMinutes() + 30);
            expiryTimeElement.textContent = expiry.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            countdownInterval = setInterval(() => {
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                
                // Atualizar display
                countdownElement.textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // Feedback visual conforme o tempo passa
                if (timeRemaining <= 5 * 60) { // √öltimos 5 minutos
                    countdownElement.classList.add('text-red-600');
                    document.querySelector('.status-dot').classList.remove('bg-success');
                    document.querySelector('.status-dot').classList.add('bg-red-500', 'countdown-alert');
                } else if (timeRemaining <= 10 * 60) { // √öltimos 10 minutos
                    countdownElement.classList.add('text-yellow-600');
                }
                
                if (timeRemaining <= 0) {
                    clearInterval(countdownInterval);
                    countdownElement.textContent = '00:00';
                    showToast('Esta cobran√ßa expirou. Gere uma nova.', 'error');
                    updateStatus('Expirada', 'error');
                }
                
                timeRemaining--;
            }, 1000);
        }
        
        function checkPaymentStatus() {
            showToast('Verificando status do pagamento...', 'info');
            
            // Simular verifica√ß√£o real
            setTimeout(() => {
                const status = Math.random();
                if (status > 0.7) {
                    updateStatus('Pago com Sucesso', 'success');
                    showToast('Pagamento confirmado! Obrigado.', 'success');
                } else if (status > 0.4) {
                    updateStatus('Processando', 'info');
                    showToast('Pagamento em processamento...', 'info');
                } else {
                    updateStatus('Aguardando Pagamento', 'warning');
                    showToast('Ainda aguardando confirma√ß√£o do pagamento', 'warning');
                }
            }, 1500);
        }
        
        function updateStatus(text, type) {
            const statusElement = document.getElementById('statusText');
            const statusDot = document.querySelector('.status-dot');
            
            statusElement.textContent = text;
            
            // Atualizar cores baseadas no tipo
            const colors = {
                success: 'text-success',
                error: 'text-red-600',
                info: 'text-primary',
                warning: 'text-yellow-600'
            };
            
            const dotColors = {
                success: 'bg-success',
                error: 'bg-red-500',
                info: 'bg-primary',
                warning: 'bg-yellow-500'
            };
            
            // Remover classes anteriores
            statusElement.classList.remove('text-success', 'text-red-600', 'text-primary', 'text-yellow-600');
            statusDot.classList.remove('bg-success', 'bg-red-500', 'bg-primary', 'bg-yellow-500');
            
            // Adicionar novas classes
            statusElement.classList.add(colors[type]);
            statusDot.classList.add(dotColors[type]);
        }
        
        function copyPixCode() {
            const pixCode = document.getElementById('pixCode').textContent;
            const copyBtn = document.getElementById('copyBtn');
            const copySuccess = document.getElementById('copySuccess');
            
            navigator.clipboard.writeText(pixCode)
                .then(() => {
                    // Feedback visual
                    copyBtn.innerHTML = '<i class="fas fa-check mr-2"></i>C√≥digo Copiado!';
                    copyBtn.classList.remove('gradient-primary');
                    copyBtn.classList.add('bg-success');
                    copySuccess.classList.remove('hidden');
                    document.getElementById('pixCode').classList.add('copy-flash');
                    
                    showToast('C√≥digo PIX copiado para a √°rea de transfer√™ncia', 'success');
                    
                    // Restaurar bot√£o ap√≥s 3 segundos
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="far fa-copy mr-2"></i>Copiar C√≥digo';
                        copyBtn.classList.remove('bg-success');
                        copyBtn.classList.add('gradient-primary');
                        copySuccess.classList.add('hidden');
                    }, 3000);
                })
                .catch(err => {
                    console.error('Erro ao copiar:', err);
                    showToast('N√£o foi poss√≠vel copiar o c√≥digo', 'error');
                });
        }
        
        function markAsPaid() {
            showToast('Verificando seu pagamento no sistema...', 'info');
            
            // Simular verifica√ß√£o com backend
            setTimeout(() => {
                const confirmed = Math.random() > 0.2; // 80% de sucesso
                
                if (confirmed) {
                    updateStatus('Pago com Sucesso', 'success');
                    clearInterval(countdownInterval);
                    showToast('Pagamento confirmado! Recebemos sua transa√ß√£o.', 'success');
                    
                    // Atualizar interface para sucesso
                    setTimeout(() => {
                        showToast('Gerando comprovante...', 'info');
                        setTimeout(() => {
                            showToast('Comprovante dispon√≠vel para download', 'success');
                        }, 1000);
                    }, 500);
                } else {
                    showToast('Pagamento ainda n√£o identificado. Aguarde alguns instantes.', 'warning');
                }
            }, 2000);
        }
        
        function newPayment() {
            showToast('Redirecionando para nova cobran√ßa...', 'info');
            window.location.href = '/public/index.html';
        }
        
        function tryAgain() {
            showToast('Preparando nova cobran√ßa...', 'info');
            
            // Resetar timer
            clearInterval(countdownInterval);
            timeRemaining = 30 * 60;
            
            // Resetar interface
            document.getElementById('countdown').textContent = '30:00';
            document.getElementById('countdown').classList.remove('text-red-600', 'text-yellow-600');
            updateStatus('Aguardando Pagamento', 'warning');
            
            showToast('Nova cobran√ßa preparada. Escaneie o QR Code novamente.', 'success');
        }
        
        function sharePayment() {
            if (navigator.share) {
                navigator.share({
                    title: 'Pagamento PIX - R$ 0,01',
                    text: 'Pague esta cobran√ßa PIX escaneando o QR Code',
                    url: window.location.href
                })
                .then(() => showToast('Cobran√ßa compartilhada com sucesso!', 'success'))
                .catch(err => console.log('Erro ao compartilhar:', err));
            } else {
                copyPixCode();
            }
        }
        
        function downloadQRCode() {
            showToast('Preparando download do QR Code...', 'info');
            // Em produ√ß√£o, aqui voc√™ geraria o QR Code real
            setTimeout(() => {
                showToast('QR Code baixado com sucesso!', 'success');
            }, 1500);
        }
        
        function contactSupport() {
            showToast('Abrindo canal de suporte...', 'info');
            // Implementar contato com suporte real
        }
        
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            
            const styles = {
                success: 'bg-success',
                error: 'bg-red-600',
                warning: 'bg-yellow-500',
                info: 'bg-primary'
            };
            
            const icons = {
                success: '‚úì',
                error: '‚úó',
                warning: '‚ö†',
                info: '‚Ñπ'
            };
            
            toast.innerHTML = `
                <div class="flex items-center">
                    <div class="w-12 h-12 ${styles[type]} rounded-xl flex items-center justify-center mr-4 flex-shrink-0">
                        <span class="text-white font-bold text-xl">${icons[type]}</span>
                    </div>
                    <div class="flex-1">
                        <div class="font-semibold">${message}</div>
                    </div>
                </div>
            `;
            
            // Mostrar toast
            toast.classList.remove('opacity-0', 'translate-y-10');
            toast.classList.add('opacity-100', 'translate-y-0');
            
            // Esconder ap√≥s 4 segundos
            setTimeout(() => {
                toast.classList.remove('opacity-100', 'translate-y-0');
                toast.classList.add('opacity-0', 'translate-y-10');
            }, 4000);
        }
        
        // Inicializa√ß√£o do sistema
        document.addEventListener('DOMContentLoaded', () => {
            // Iniciar contador
            startCountdown();
            
            // Carregar dados da URL
            const urlParams = new URLSearchParams(window.location.search);
            const amount = urlParams.get('amount');
            const id = urlParams.get('id');
            
            if (amount) {
                // Atualizar valor na p√°gina se fornecido
                const amountElement = document.querySelector('.text-6xl');
                if (amountElement) {
                    amountElement.textContent = `R$ ${parseFloat(amount).toFixed(2)}`;
                }
            }
            
            // Animar elementos
            const elements = document.querySelectorAll('.fade-up');
            elements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
            
            // Verificar pagamento automaticamente a cada 30 segundos
            setInterval(checkPaymentStatus, 30000);
        });
    </script>
</body>
</html>