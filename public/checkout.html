<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagamento PIX ‚Ä¢ R$ 0,01</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }
        
        .card-shadow {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
        }
        
        .countdown-pulse {
            animation: countdownPulse 1s infinite alternate;
        }
        
        @keyframes countdownPulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(to right, #10b981, #3b82f6, #ef4444);
            background-size: 300% 100%;
            animation: progressAnimation 30s linear forwards;
        }
        
        @keyframes progressAnimation {
            0% { 
                background-position: 100% 0;
                width: 100%;
            }
            70% { 
                background-position: 0 0;
                width: 30%;
            }
            100% { 
                background-position: 0 0;
                width: 0%;
            }
        }
        
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .btn-hover {
            transition: all 0.3s ease;
        }
        
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .qr-code-zoom {
            transition: transform 0.3s ease;
        }
        
        .qr-code-zoom:hover {
            transform: scale(1.05);
        }
        
        .copy-flash {
            animation: copyFlash 0.5s ease;
        }
        
        @keyframes copyFlash {
            0% { background-color: transparent; }
            50% { background-color: rgba(59, 130, 246, 0.2); }
            100% { background-color: transparent; }
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="mb-8 slide-up">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <a href="/public/index.html" class="flex items-center text-gray-600 hover:text-blue-600 transition-colors">
                        <i class="fas fa-arrow-left mr-2"></i>
                        <span>Voltar</span>
                    </a>
                </div>
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-blue-700 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-qrcode text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">Pagamento PIX</h1>
                        <p class="text-sm text-gray-500">Ambiente Sandbox</p>
                    </div>
                </div>
                <div class="text-right">
                    <div class="inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                        <i class="fas fa-shield-alt mr-1"></i>
                        <span>TESTE</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="grid lg:grid-cols-2 gap-8 mb-8">
            <!-- Left Column - Payment Info -->
            <div class="slide-up" style="animation-delay: 0.1s">
                <div class="bg-white rounded-2xl card-shadow p-6 mb-6">
                    <!-- Amount Display -->
                    <div class="text-center mb-8">
                        <p class="text-gray-600 mb-2">VALOR A PAGAR</p>
                        <div class="text-5xl font-bold text-green-600 mb-4">R$ 0,01</div>
                        <div class="inline-flex items-center px-4 py-2 bg-green-50 text-green-700 rounded-full">
                            <i class="fas fa-coins mr-2"></i>
                            <span class="text-sm font-medium">Pagamento m√≠nimo</span>
                        </div>
                    </div>
                    
                    <!-- Instructions -->
                    <div class="bg-blue-50 rounded-xl p-5 mb-6">
                        <h3 class="font-semibold text-blue-800 mb-3 flex items-center">
                            <i class="fas fa-graduation-cap mr-2"></i>
                            Para pagar:
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-start">
                                <div class="flex-shrink-0 w-8 h-8 bg-white rounded-full flex items-center justify-center mr-3 border border-blue-200">
                                    <span class="text-blue-600 font-bold">1</span>
                                </div>
                                <p class="text-blue-900 pt-1">Abra seu app banc√°rio</p>
                            </div>
                            <div class="flex items-start">
                                <div class="flex-shrink-0 w-8 h-8 bg-white rounded-full flex items-center justify-center mr-3 border border-blue-200">
                                    <span class="text-blue-600 font-bold">2</span>
                                </div>
                                <p class="text-blue-900 pt-1">Toque em <strong>"Pagar com PIX"</strong></p>
                            </div>
                            <div class="flex items-start">
                                <div class="flex-shrink-0 w-8 h-8 bg-white rounded-full flex items-center justify-center mr-3 border border-blue-200">
                                    <span class="text-blue-600 font-bold">3</span>
                                </div>
                                <p class="text-blue-900 pt-1">Aponte a c√¢mera para o c√≥digo</p>
                            </div>
                            <div class="flex items-start">
                                <div class="flex-shrink-0 w-8 h-8 bg-white rounded-full flex items-center justify-center mr-3 border border-blue-200">
                                    <span class="text-blue-600 font-bold">4</span>
                                </div>
                                <p class="text-blue-900 pt-1">Confirme o pagamento</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Timer -->
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center">
                                <i class="fas fa-clock text-gray-600 mr-2"></i>
                                <span class="text-gray-700 font-medium">V√°lido por</span>
                            </div>
                            <div class="flex items-center">
                                <div id="countdown" class="text-2xl font-bold text-gray-800 mr-2">30:00</div>
                                <div class="w-3 h-3 bg-green-500 rounded-full countdown-pulse"></div>
                            </div>
                        </div>
                        <div class="progress-bar"></div>
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>In√≠cio</span>
                            <span>Expira em: <span id="expiryTime">14:55</span></span>
                        </div>
                    </div>
                    
                    <!-- Payment Status -->
                    <div class="bg-gray-50 rounded-xl p-4 mb-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-sm text-gray-500">Status do pagamento</div>
                                <div class="flex items-center">
                                    <span id="statusText" class="font-medium text-gray-800 mr-2">Aguardando pagamento</span>
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full pulse-animation"></div>
                                </div>
                            </div>
                            <button onclick="checkPaymentStatus()" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center btn-hover">
                                <i class="fas fa-sync-alt mr-2"></i>
                                Atualizar
                            </button>
                        </div>
                    </div>
                    
                    <!-- Error Message (if any) -->
                    <div id="errorMessage" class="hidden bg-red-50 border border-red-200 rounded-xl p-4 mb-6">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-red-500 mt-1 mr-3"></i>
                            <div>
                                <div class="font-medium text-red-800">Erro: <span id="errorText">startCountdown is not defined</span></div>
                                <p class="text-red-600 text-sm mt-1">Recarregue a p√°gina ou tente novamente</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Try Again Button -->
                    <button id="tryAgainBtn" onclick="tryAgain()" class="w-full py-4 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-800 hover:to-gray-900 text-white font-semibold rounded-xl transition-all duration-300 btn-hover flex items-center justify-center mb-6">
                        <i class="fas fa-redo mr-2"></i>
                        üîÑ Tentar Novamente
                    </button>
                </div>
            </div>

            <!-- Right Column - QR Code & Actions -->
            <div class="slide-up" style="animation-delay: 0.2s">
                <div class="bg-white rounded-2xl card-shadow p-6 h-full">
                    <!-- QR Code Container -->
                    <div class="text-center mb-8">
                        <div class="inline-block p-4 bg-gray-50 rounded-2xl mb-4">
                            <div id="qrCodeContainer" class="qr-code-zoom">
                                <div class="w-64 h-64 bg-gray-100 rounded-xl flex items-center justify-center mx-auto border-4 border-white shadow-lg">
                                    <!-- QR Code will be inserted here -->
                                    <div class="text-center p-4">
                                        <i class="fas fa-qrcode text-gray-400 text-6xl mb-3"></i>
                                        <p class="text-gray-500 font-medium">QR Code PIX</p>
                                        <p class="text-gray-400 text-sm mt-2">Escaneie para pagar</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">Aponte a c√¢mera do seu banco para escanear</p>
                    </div>
                    
                    <!-- PIX Code -->
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-semibold text-gray-700 flex items-center">
                                <i class="fas fa-key mr-2"></i>
                                C√≥digo PIX (Copia e Cola)
                            </h3>
                            <button onclick="copyPixCode()" id="copyBtn" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center btn-hover">
                                <i class="far fa-copy mr-2"></i>
                                Copiar
                            </button>
                        </div>
                        <div class="relative">
                            <div id="pixCode" class="bg-gray-50 p-4 rounded-xl font-mono text-sm text-gray-800 overflow-x-auto whitespace-nowrap">
                                00020126580014br.gov.bcb.pix0136655d491f-81a7-48d2‚Ä¶009Sao Paulo62250521mpqrinter139558626783630470DA
                            </div>
                            <div id="copySuccess" class="hidden absolute right-4 top-1/2 transform -translate-y-1/2 text-green-600">
                                <i class="fas fa-check-circle"></i>
                            </div>
                        </div>
                        <p class="text-gray-500 text-xs mt-2">Cole no campo PIX do seu aplicativo banc√°rio</p>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-4">
                        <button onclick="markAsPaid()" class="w-full py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-300 btn-hover flex items-center justify-center">
                            <i class="fas fa-check-circle mr-2"></i>
                            ‚úÖ J√° Paguei
                        </button>
                        
                        <button onclick="newPayment()" class="w-full py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold rounded-xl transition-all duration-300 btn-hover flex items-center justify-center">
                            <i class="fas fa-plus-circle mr-2"></i>
                            üÜï Novo Pagamento
                        </button>
                        
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="sharePayment()" class="py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors flex items-center justify-center btn-hover">
                                <i class="fas fa-share-alt mr-2"></i>
                                Compartilhar
                            </button>
                            <button onclick="downloadQR()" class="py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-colors flex items-center justify-center btn-hover">
                                <i class="fas fa-download mr-2"></i>
                                Baixar QR
                            </button>
                        </div>
                    </div>
                    
                    <!-- Help Section -->
                    <div class="mt-8 pt-6 border-t border-gray-200">
                        <div class="flex items-start">
                            <i class="fas fa-question-circle text-gray-400 mt-1 mr-3"></i>
                            <div>
                                <h4 class="font-medium text-gray-700 mb-2">Precisa de ajuda?</h4>
                                <p class="text-gray-600 text-sm">Em caso de problemas com o pagamento, entre em contato com nosso suporte.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm mb-6 slide-up" style="animation-delay: 0.3s">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div class="flex items-center justify-center">
                    <i class="fas fa-lock mr-2"></i>
                    <span>Pagamento 100% seguro</span>
                </div>
                <div class="flex items-center justify-center">
                    <i class="fas fa-bolt mr-2"></i>
                    <span>Confirma√ß√£o instant√¢nea</span>
                </div>
                <div class="flex items-center justify-center">
                    <i class="fas fa-history mr-2"></i>
                    <span>V√°lido por 30 minutos</span>
                </div>
            </div>
            <p>Este √© um ambiente de teste. Transa√ß√£o ID: <span class="font-mono">139558626783</span></p>
        </footer>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="hidden fixed bottom-6 right-6 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-xl z-50 max-w-sm"></div>

    <script>
        // Timer functionality
        let countdownInterval;
        let timeRemaining = 30 * 60; // 30 minutos em segundos
        
        function startCountdown() {
            const countdownElement = document.getElementById('countdown');
            const progressBar = document.querySelector('.progress-bar');
            const expiryTimeElement = document.getElementById('expiryTime');
            
            // Calcular hor√°rio de expira√ß√£o
            const now = new Date();
            now.setMinutes(now.getMinutes() + 30);
            const expiryTime = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            expiryTimeElement.textContent = expiryTime;
            
            // Iniciar contador
            countdownInterval = setInterval(() => {
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                
                // Atualizar display
                countdownElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // Mudar cor conforme o tempo passa
                if (timeRemaining < 5 * 60) { // Menos de 5 minutos
                    countdownElement.classList.remove('text-gray-800');
                    countdownElement.classList.add('text-red-600');
                } else if (timeRemaining < 10 * 60) { // Menos de 10 minutos
                    countdownElement.classList.remove('text-gray-800');
                    countdownElement.classList.add('text-yellow-600');
                }
                
                // Verificar expira√ß√£o
                if (timeRemaining <= 0) {
                    clearInterval(countdownInterval);
                    countdownElement.textContent = '00:00';
                    showToast('QR Code expirado! Gere um novo pagamento.', 'error');
                    document.getElementById('statusText').textContent = 'Expirado';
                    document.querySelector('.pulse-animation').classList.remove('bg-yellow-500');
                    document.querySelector('.pulse-animation').classList.add('bg-red-500');
                }
                
                timeRemaining--;
            }, 1000);
        }
        
        function checkPaymentStatus() {
            showToast('Verificando status do pagamento...', 'info');
            
            // Simular verifica√ß√£o
            setTimeout(() => {
                const statuses = ['pending', 'processing', 'completed'];
                const currentStatus = statuses[Math.floor(Math.random() * statuses.length)];
                
                const statusText = document.getElementById('statusText');
                const statusDot = document.querySelector('.pulse-animation');
                
                switch(currentStatus) {
                    case 'completed':
                        statusText.textContent = 'Pagamento confirmado';
                        statusText.classList.add('text-green-600');
                        statusDot.classList.remove('bg-yellow-500');
                        statusDot.classList.add('bg-green-500');
                        showToast('Pagamento confirmado com sucesso!', 'success');
                        break;
                    case 'processing':
                        statusText.textContent = 'Processando pagamento';
                        statusText.classList.add('text-blue-600');
                        statusDot.classList.remove('bg-yellow-500');
                        statusDot.classList.add('bg-blue-500');
                        showToast('Pagamento em processamento...', 'info');
                        break;
                    default:
                        statusText.textContent = 'Aguardando pagamento';
                        statusText.classList.add('text-yellow-600');
                        statusDot.classList.add('bg-yellow-500');
                        showToast('Ainda aguardando pagamento', 'warning');
                }
            }, 1500);
        }
        
        function copyPixCode() {
            const pixCode = document.getElementById('pixCode').textContent;
            const copyBtn = document.getElementById('copyBtn');
            const copySuccess = document.getElementById('copySuccess');
            
            navigator.clipboard.writeText(pixCode)
                .then(() => {
                    // Feedback visual
                    copyBtn.innerHTML = '<i class="fas fa-check mr-2"></i>Copiado!';
                    copyBtn.classList.remove('bg-blue-600');
                    copyBtn.classList.add('bg-green-600');
                    copySuccess.classList.remove('hidden');
                    document.getElementById('pixCode').classList.add('copy-flash');
                    
                    showToast('C√≥digo PIX copiado para a √°rea de transfer√™ncia!', 'success');
                    
                    // Resetar bot√£o ap√≥s 2 segundos
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="far fa-copy mr-2"></i>Copiar';
                        copyBtn.classList.remove('bg-green-600');
                        copyBtn.classList.add('bg-blue-600');
                        copySuccess.classList.add('hidden');
                        document.getElementById('pixCode').classList.remove('copy-flash');
                    }, 2000);
                })
                .catch(err => {
                    console.error('Erro ao copiar:', err);
                    showToast('Erro ao copiar c√≥digo', 'error');
                });
        }
        
        function markAsPaid() {
            showToast('Verificando seu pagamento...', 'info');
            
            // Simular verifica√ß√£o
            setTimeout(() => {
                const confirmed = Math.random() > 0.3; // 70% de chance de sucesso
                
                if (confirmed) {
                    showToast('Pagamento confirmado! Obrigado.', 'success');
                    
                    // Atualizar UI
                    document.getElementById('statusText').textContent = 'Pagamento confirmado';
                    document.getElementById('statusText').classList.add('text-green-600');
                    document.querySelector('.pulse-animation').classList.remove('bg-yellow-500');
                    document.querySelector('.pulse-animation').classList.add('bg-green-500');
                    
                    // Parar contador
                    clearInterval(countdownInterval);
                    
                    // Mostrar mensagem de sucesso
                    setTimeout(() => {
                        showToast('Redirecionando para p√°gina de sucesso...', 'success');
                        // Aqui voc√™ pode redirecionar para uma p√°gina de sucesso
                    }, 1500);
                } else {
                    showToast('Pagamento ainda n√£o identificado. Tente novamente.', 'warning');
                }
            }, 2000);
        }
        
        function newPayment() {
            showToast('Criando novo pagamento...', 'info');
            // Redirecionar para p√°gina inicial
            setTimeout(() => {
                window.location.href = '/public/index.html';
            }, 1000);
        }
        
        function tryAgain() {
            showToast('Reiniciando processo de pagamento...', 'info');
            
            // Resetar timer
            clearInterval(countdownInterval);
            timeRemaining = 30 * 60;
            
            // Resetar UI
            document.getElementById('countdown').textContent = '30:00';
            document.getElementById('countdown').classList.remove('text-red-600', 'text-yellow-600');
            document.getElementById('countdown').classList.add('text-gray-800');
            document.getElementById('statusText').textContent = 'Aguardando pagamento';
            document.getElementById('statusText').classList.remove('text-green-600', 'text-blue-600');
            document.getElementById('statusText').classList.add('text-yellow-600');
            
            // Esconder erro
            document.getElementById('errorMessage').classList.add('hidden');
            
            // Reiniciar contador
            startCountdown();
            
            showToast('Processo reiniciado com sucesso!', 'success');
        }
        
        function sharePayment() {
            if (navigator.share) {
                navigator.share({
                    title: 'Pagamento PIX - R$ 0,01',
                    text: 'Escaneie este QR Code para pagar R$ 0,01 via PIX',
                    url: window.location.href
                })
                .then(() => showToast('Compartilhado com sucesso!', 'success'))
                .catch(err => console.log('Erro ao compartilhar:', err));
            } else {
                copyPixCode();
                showToast('Link copiado para compartilhamento!', 'info');
            }
        }
        
        function downloadQR() {
            showToast('Baixando QR Code...', 'info');
            // Implementar download real do QR Code aqui
            setTimeout(() => {
                showToast('QR Code baixado com sucesso!', 'success');
            }, 1500);
        }
        
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            
            // Definir √≠cone e cor baseado no tipo
            const icons = {
                success: '‚úì',
                error: '‚ö†',
                warning: '‚ö†',
                info: '‚Ñπ'
            };
            
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };
            
            toast.innerHTML = `
                <div class="flex items-center">
                    <div class="w-8 h-8 ${colors[type]} rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                        <span class="text-white font-bold">${icons[type]}</span>
                    </div>
                    <div class="flex-1">${message}</div>
                </div>
            `;
            
            toast.classList.remove('hidden');
            
            // Anima√ß√£o de entrada
            setTimeout(() => {
                toast.classList.remove('opacity-0');
            }, 10);
            
            // Esconder ap√≥s 4 segundos
            setTimeout(() => {
                toast.classList.add('opacity-0');
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 300);
            }, 4000);
        }
        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            // Iniciar contador
            startCountdown();
            
            // Simular QR Code real (em produ√ß√£o, isso viria da API)
            setTimeout(() => {
                // Aqui voc√™ carregaria o QR Code real da API
                // document.getElementById('qrCodeContainer').innerHTML = `<img src="data:image/png;base64,${qrCodeBase64}" alt="QR Code PIX">`;
            }, 500);
            
            // Animar elementos
            const elements = document.querySelectorAll('.slide-up');
            elements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
            
            // Verificar se h√° erro na URL
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('error')) {
                document.getElementById('errorMessage').classList.remove('hidden');
            }
        });
    </script>
</body>
</html>